<header class=" text-white px-3 d-flex justify-content-between align-items-center" style="background-color: #151e59;">
  <div class="d-flex align-items-center">
  	<div>
      <%= image_tag 'logo5.png', alt: 'Logo', class: 'logo' %>
    </div>
    <div class="vertical-line"></div>
    <div class="">
      <h2 class="fw-bold">Dental Credentialing<br> Manager</h2>
    </div>
  </div>
  <div class="d-flex align-items-center">
    <i class="fas fa-bell fa-xl me-2"></i>
     <div class="border border-radius bg-white text-dark fw-bold d-flex justify-content-center align-items-center" style="width: 30px; height: 30px; border-radius: 10px;">JD</div>
    <i class="fa-solid fa-circle-user ms-2 fa-3x custom-icon"></i>
  </div>
</header>
<div class="d-flex vh-100">
  <nav class="bg-white p-3 sidebar">
    <div class=" fw-bold">
      <a href="<%= home_path %>" class=" list-group-item list-group-item-action ">
        <i class="fa-solid fa-box-open me-3"></i> APPLICATION
      </a>
      <a href="<%= locations_path %>" class="list-group-item list-group-item-action active">
        <i class="fa-solid fa-location-arrow me-3"></i> LOCATIONS
      </a>
      <a href="#" class="list-group-item list-group-item-action ">
        <i class="fa-solid fa-stethoscope me-3 "></i> DOCTORS
      </a>
      <a href="#" class="list-group-item list-group-item-action" style="font-size: 15.2px;">
        <i class="fa-solid fa-truck-ramp-box me-3"style="font-size: 12px;"></i>PAR TRACKING 
      </a>
      <a href="#" class="list-group-item list-group-item-action ">
        <i class="fas fa-question-circle me-3 "></i> HELP / CODES
      </a>
      <a href="#" class="list-group-item list-group-item-action ">
        <i class="fa-solid fa-door-open me-3"></i> LOG OUT
      </a>
    </div>
  </nav>
  <div class="vertical-line1"></div>
  <main class="flex-grow-1 p-4">
    <h3 class="fw-bold">
      OFFICE PROFILE
    </h3><hr>
    <h2 class="mt-4 fw-bold">Dental Demonstration Office</h2>
    <h5 class="mt-4 fw-bold"><%= @location.name %></h5>
    <p class="para1">Complete the following questions regarding your practice; your data will automatically save as you navigate from section to section. To move to a new section, just click on the title of that section. After completing the final section, click the "Save" link.</p>
    <div class="row mt-3">
		  <div class="col d-flex flex-wrap gap-2">
		    <%= link_to 'Corporate', edit_corporate_location_path(@location), class: 'btn1 btn-grey' %>
		    <%= link_to 'Technical', '#', onclick: "saveAndNavigate('#{edit_technical_location_path(@location)}')", class: 'btn1 btn-blue' %>
		    <%= link_to 'Location Specification', '#', onclick: "saveAndNavigate('#{location_specification_location_path(@location)}')", class: 'btn1 btn-grey' %>
		    <%= link_to 'Services', services_location_path(@location), class: 'btn1 btn-grey' %>
		    <%= link_to 'Liability', liability_location_path(@location), class: 'btn1 btn-grey' %>
		    <%= link_to 'Miscellaneous', miscellaneous_location_path(@location), class: 'btn1 btn-grey' %>
		    <%= link_to 'Save', save_location_path(@location), class: 'btn1 btn-grey' %>
		  </div>
		</div>
    <div class="border border-dark mt-5 p-4 mb-5">
      <div class="row mt-3">
        <div class="text-end">
          <button class="btn1 btn btn-danger" data-bs-toggle="collapse" data-bs-target="#collapsibleFormSection" aria-expanded="false" aria-controls="collapsibleFormSection">
            COLLAPSE ALL
          </button>
        </div>
      </div>
      <div class="collapse show" id="collapsibleFormSection">
	      <%= form_with(model: @location, local: true, html: { class: "mt-5 form-border", id: "technical-form" }) do |form| %>
		      <div class="">
				    <div class="section-header fw-bold">
				      <p class="mt-3">Technical Questions</p>
				    </div>	
				    <div class="question-row">
						  <div class="d-flex justify-content-between align-items-center fw-bold">
						    <%= form.label :internet_connection, "1. DOES YOUR OFFICE HAVE INTERNET CONNECTION?", class: "col-form-label" %>
						    <div class="radio-group d-flex">
						      <label class="form-check-label d-flex align-items-center">
						        <%= form.radio_button :internet_connection, 'yes', id: 'q1-yes', class: "form-check-input " %>
						        <span class="ms-1">YES</span>
						      </label>
						      
						      <label class="form-check-label d-flex align-items-center">
						        <%= form.radio_button :internet_connection, 'no', id: 'q1-no', class: "form-check-input" %>
						        <span class="ms-1">NO</span>
						      </label>
						      
						      <label class="form-check-label d-flex align-items-center">
						        <%= form.radio_button :internet_connection, 'na', id: 'q1-na', class: "form-check-input" %>
						        <span class="ms-1">N/A</span>
						      </label>
						    </div>
						  </div>
						</div>

				  </div>
	        <div class="">
			      <div class="section-header  fw-bold">Handicap Access</div>
			      <div class="question-row">
			        <div class="d-flex justify-content-between align-items-center fw-bold ">
							  <%= form.label :ada_accessibility, "2. DOES THIS OFFICE MEET ADA ACCESSIBILITY REQUIREMENTS?", class: "col-form-label" %>
							  <div class="radio-group d-flex">
							    <label class="form-check-label d-flex align-items-center ">
							      <%= form.radio_button :ada_accessibility, 'yes', id: "q2-yes", class: "form-check-input" %>
							      <span class="ms-1">YES</span>
							    </label>

							    <label class="form-check-label d-flex align-items-center">
							      <%= form.radio_button :ada_accessibility, 'no', id: "q2-no", class: "form-check-input" %>
							      <span class="ms-1">NO</span>
							    </label>

							    <label class="form-check-label d-flex align-items-center">
							      <%= form.radio_button :ada_accessibility, 'na', id: "q2-na", class: "form-check-input" %>
							      <span class="ms-1">N/A</span>
							    </label>
							  </div>
							</div>
						</div>
			    </div>
		      <div class="section-header  fw-bold">Accepting new patients?</div>
		      <div class="question-row">
					  <div class="d-flex justify-content-between align-items-center fw-bold ">
					    <%= form.label :accepting_new_patients, "3. ACCEPTING NEW PATIENTS?", class: "col-form-label" %>
					    <div class="radio-group d-flex">
					      <label class="form-check-label d-flex align-items-center ">
					        <%= form.radio_button :accepting_new_patients, 'yes', id: "q3-yes", class: "form-check-input" %>
					        <span class="ms-1">YES</span>
					      </label>

					      <label class="form-check-label d-flex align-items-center ">
					        <%= form.radio_button :accepting_new_patients, 'no', id: "q3-no", class: "form-check-input" %>
					        <span class="ms-1">NO</span>
					      </label>

					      <label class="form-check-label d-flex align-items-center">
					        <%= form.radio_button :accepting_new_patients, 'na', id: "q3-na", class: "form-check-input" %>
					        <span class="ms-1">N/A</span>
					      </label>
					    </div>
					  </div>
					</div>
		
			    <div class="">
			      <div class="section-header p-3 fw-bold">Limitations</div>
			      <div class="question-row">
						  <div class="d-flex justify-content-between align-items-center fw-bold">
						    <%= form.label :treat_children, "4. DOES YOUR OFFICE TREAT CHILDREN?", class: "col-form-label" %>
						    <div class="radio-group d-flex">
						      <label class="form-check-label d-flex align-items-center">
						        <%= form.radio_button :treat_children, 'yes', id: "q4-yes", class: "form-check-input" %>
						        <span class="ms-1">YES</span>
						      </label>

						      <label class="form-check-label d-flex align-items-center">
						        <%= form.radio_button :treat_children, 'no', id: "q4-no", class: "form-check-input" %>
						        <span class="ms-1">NO</span>
						      </label>

						      <label class="form-check-label d-flex align-items-center">
						        <%= form.radio_button :treat_children, 'na', id: "q4-na", class: "form-check-input" %>
						        <span class="ms-1">N/A</span>
						      </label>
						    </div>
						  </div>
						</div>


			      </div>
			      <div class="question-row">
						  <div class="d-flex justify-content-between align-items-center fw-bold">
						    <%= form.label :treat_disabled_adults, "5. TREAT DISABLED ADULTS?", class: "col-form-label" %>
						    <div class="radio-group d-flex">
						      <label class="form-check-label d-flex align-items-center">
						        <%= form.radio_button :treat_disabled_adults, 'yes', id: "q5-yes", class: "form-check-input" %>
						        <span class="ms-1">YES</span>
						      </label>

						      <label class="form-check-label d-flex align-items-center">
						        <%= form.radio_button :treat_disabled_adults, 'no', id: "q5-no", class: "form-check-input" %>
						        <span class="ms-1">NO</span>
						      </label>

						      <label class="form-check-label d-flex align-items-center">
						        <%= form.radio_button :treat_disabled_adults, 'na', id: "q5-na", class: "form-check-input" %>
						        <span class="ms-1">N/A</span>
						      </label>
						    </div>
						  </div>
						</div>

			      <div class="question-row">
						  <div class="d-flex justify-content-between align-items-center fw-bold">
						    <%= form.label :treat_disabled_children, "6. TREAT DISABLED CHILDREN?", class: "col-form-label" %>
						    <div class="radio-group d-flex">
						      <label class="form-check-label d-flex align-items-center">
						        <%= form.radio_button :treat_disabled_children, 'yes', id: "q6-yes", class: "form-check-input" %>
						        <span class="ms-1">YES</span>
						      </label>

						      <label class="form-check-label d-flex align-items-center">
						        <%= form.radio_button :treat_disabled_children, 'no', id: "q6-no", class: "form-check-input", checked: true %>
						        <span class="ms-1">NO</span>
						      </label>

						      <label class="form-check-label d-flex align-items-center">
						        <%= form.radio_button :treat_disabled_children, 'na', id: "q6-na", class: "form-check-input" %>
						        <span class="ms-1">N/A</span>
						      </label>
						    </div>
						  </div>
						</div>

			      <div class="question-row">
						  <div class="d-flex justify-content-between align-items-center fw-bold">
						    <%= form.label :early_morning_appointments, "7. EARLY MORNING APPOINTMENTS? (BEFORE 9 AM)", class: "col-form-label" %>
						    <div class="radio-group d-flex">
						      <label class="form-check-label d-flex align-items-center">
						        <%= form.radio_button :early_morning_appointments, 'yes', id: "q7-yes", class: "form-check-input" %>
						        <span class="ms-1">YES</span>
						      </label>

						      <label class="form-check-label d-flex align-items-center">
						        <%= form.radio_button :early_morning_appointments, 'no', id: "q7-no", class: "form-check-input" %>
						        <span class="ms-1">NO</span>
						      </label>

						      <label class="form-check-label d-flex align-items-center">
						        <%= form.radio_button :early_morning_appointments, 'na', id: "q7-na", class: "form-check-input" %>
						        <span class="ms-1">N/A</span>
						      </label>
						    </div>
						  </div>
						</div>

			      <div class="question-row">
						  <div class="d-flex justify-content-between align-items-center fw-bold">
						    <%= form.label :evening_appointments, "8. EVENING APPOINTMENTS? (AFTER 5 PM)", class: "col-form-label" %>
						    <div class="radio-group d-flex">
						      <label class="form-check-label d-flex align-items-center">
						        <%= form.radio_button :evening_appointments, 'yes', id: "q8-yes", class: "form-check-input" %>
						        <span class="ms-1">YES</span>
						      </label>

						      <label class="form-check-label d-flex align-items-center">
						        <%= form.radio_button :evening_appointments, 'no', id: "q8-no", class: "form-check-input", checked: true %>
						        <span class="ms-1">NO</span>
						      </label>

						      <label class="form-check-label d-flex align-items-center">
						        <%= form.radio_button :evening_appointments, 'na', id: "q8-na", class: "form-check-input" %>
						        <span class="ms-1">N/A</span>
						      </label>
						    </div>
						  </div>
						</div>

			      </div>
			    </div>
	        <div class="">
					  <div class="section-header fw-bold">
					    <p class="mt-3">Non-English Languages Spoken</p>
					  </div>
					  
					  <% (1..3).each do |i| %>
					    <div class="question-row">
					      <div class="row mt-3">
					        <div class="col-md-9">
					          <%= form.label "language_#{i}", "#{8 + i}. LANGUAGE #{i}", class: "form-label fw-bold me-3 " %>
					        </div>
					        <div class="col-md-3">
					          <div class="radio-group">
					            <%= form.text_field "language_#{i}", id: "language_#{i}", class: "form-control border border-dark rounded-0" %>
					          </div>
					        </div>
					      </div>
					    </div>
					  <% end %>
			    </div>
	        <div class="mb-3">
					  <div class="section-header fw-bold">
					    <p class="mt-3">Language Interpreted</p>
					  </div>
			      <% (1..3).each do |i| %>
					    <div class="question-row">
					      <div class="row mt-3">
					        <div class="col-md-9">
					          <%= form.label "language_#{i}", "#{8 + i}. LANGUAGE #{i}", class: "form-label fw-bold me-3" %>
					        </div>
					        <div class="col-md-3">
					          <div class="radio-group">
					            <%= form.text_field "language_#{i}", id: "language_#{i}", class: "form-control border border-dark rounded-0" %>
					          </div>
					        </div>
					      </div>
					    </div>
					  <% end %>
			    </div>
	        <%# <div class="mb-3">
			      <%= form.submit "Submit", class: "btn btn-primary mt-3" %>
			    </div>
	      <% end %>
	    </div>
    </div>
  </main>
</div>
<style>
	 .logo{
  height: 20%;
  width: 175px;
}  
.list-group-item {
    padding: 20px;
    display: flex;
    align-items: center;
    color: #6c757d;
}
.list-group-item.active {
    background-color: #11468f;
    color: white;
    border-radius: 18px;
<%#     padding: 20px; %>
}


.btn1 {
  padding: 10px 15px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-weight: bold;
}

.btn-blue {
  background-color: #11468f;
  color: white;
  border-radius: 10px !important;
  padding: 10px 20px;
  font-weight: bold;
  text-decoration: none;
}

.custom-icon{
  font-size: 33px;
} 

.btn-danger {
  color: white;
  margin-left: 10px;
  background-color: #e8484b;
  font-weight: bold;
  border-top-left-radius: 10px !important;
  border-top-right-radius: 10px !important;
  border-bottom-right-radius: 10px !important;
  border-bottom-left-radius: 10px !important;
}

.btn-grey{
  background-color: #8d8d8d;
  color: #eee;
  text-decoration: none;
}
.vertical-line {
  border-left: 2px solid white;
  height: auto;
  min-height: 85px;
  margin: 0 42px;
}
.vertical-line1 {
  border-left: 1px solid #ccc;
  height: 100% !important;
  margin-left: 18px;
  min-height: 1900px;
}
.para1{
  font-size: 23.5px;
}
.para2{
  font-size: 19px;
}
.bordered-row {
  border-bottom: 1px solid black; /* Adjust thickness as needed */
  padding-bottom: 10px;
  margin-bottom: 10px;
  width: 100%;
}
.section-header {
  background-color: #E0E0E0;
  padding: 8px 15px;
  font-weight: 500;
}

.question-row  {
  padding: 8px 15px;
  border-bottom: 1px solid black;
}

.form-border{
  border-left: 1px solid black;
  border-right: 1px solid black;
}

.form-check-input {
  margin-right: 8px;
}

.collapse-btn {
    background-color: #E91E63;
    border: none;
}

.collapse-btn:hover {
    background-color: #D81B60;
}	

.radio-group {
    display: flex;
    gap: 2rem;
}

/* Target the radio button when checked */
<%# .radio-group input[type="radio"]:checked + label {
  color: #11468f;
} %>

/* Customize the appearance of the radio button itself */
.radio-group input[type="radio"]:checked {
  accent-color: #11468f; /* This sets the checked color for compatible browsers */
}


.nav-link {
    color: #6c757d;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}
</style>

<script>
 function saveAndNavigate(url) {
  $.ajax({
    url: '<%= save_data_location_path(@location) %>',
    method: 'PATCH',
    data: $('form').serialize(),
    headers: {
      'X-CSRF-Token': $('meta[name="csrf-token"]').attr('content')  // Attach CSRF token here
    },
    success: function(response) {
      // Check if the response contains location data
      if (response && response.location) {
        // Update each form field with the updated data from the server response
        for (const [key, value] of Object.entries(response.location)) {
          const $field = $(`[name="location[${key}]"]`);

          if ($field.is(':radio')) {
            // Set the radio button based on the value
            $field.filter(`[value="${value}"]`).prop('checked', true);
          } else {
            // Update other fields like text, select, etc.
            $field.val(value);
          }
        }
      }

      // Redirect to the specified URL (next tab) after updating fields
      window.location.href = url;
    },
    error: function(xhr, status, error) {
      console.error("Error: " + error);
      alert('There was an error saving the data.');
    }
  });
}


</script>

